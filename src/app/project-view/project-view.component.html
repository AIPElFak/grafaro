<grf-header [isProjectViewMode]="true"></grf-header>

<main>
  <template #renamePopupOutlet></template>

  <grf-sidebar></grf-sidebar>

  <div id="graph">
    <div class="graph-inner">
      <grf-graph [nodes]="(algorithmService.currentNormalizedState$ | async)?.nodes"
                 [edges]="(algorithmService.currentNormalizedState$ | async)?.edges"
                 (graphClick)="click$.next($event)"
                 (graphNodeDragEnd)="onMoveNode($event)"></grf-graph>
      <grf-controls (stateNumberChange)="updateStateNumber($event)"
                    [current]="algorithmService.currentStateIndex"
                    [total]="algorithmService.totalNumberOfStates"
      ></grf-controls>
    </div>
    <div class="debug-table-wrapper">
      <grf-debug-table [state]="currentState$ | async"></grf-debug-table>
    </div>
  </div>

  <grf-toolbar [currentSelected]="chooseTool$ | async"
               (currentSelectedChange)="chooseTool$.next($event)"
               (load)="loadDialogToggle()"
               (save)="saveDialogToggle()"
  ></grf-toolbar>

</main>

<grf-dialog *ngIf="isSaveDialogOpen" (close)="saveDialogToggle()">
  <grf-save-dialog></grf-save-dialog>
</grf-dialog>

<grf-dialog *ngIf="isLoadDialogOpen" (close)="loadDialogToggle()">
  <grf-load-dialog></grf-load-dialog>
</grf-dialog>

<template #toastOutlet></template>
